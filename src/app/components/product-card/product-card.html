<div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300 group">
  <div class="relative aspect-square overflow-hidden">
    <img
      [src]="product().image"
      [alt]="product().name"
      class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
    />
    @if (product().badge) {
      <div [class]="'absolute top-3 right-3 px-3 py-1 rounded-full text-xs font-semibold ' + getBadgeClass(product().badge)">
        {{ getBadgeText(product().badge) }}
      </div>
    }
    @if (product().discount) {
      <div class="absolute top-3 left-3 bg-white px-2 py-1 rounded text-xs font-bold text-red-600">
        -{{ product().discount }}%
      </div>
    }
  </div>

  <div class="p-4">
    <h3 class="text-lg font-semibold text-gray-900 mb-2 line-clamp-2 min-h-[3.5rem]">
      {{ product().name }}
    </h3>
    <p class="text-sm text-gray-600 mb-3 line-clamp-2 min-h-[2.5rem]">
      {{ product().shortDescription }}
    </p>

    <div class="mb-4">
      @if (product().oldPrice) {
        <p class="text-sm text-gray-500 line-through mb-1">
          R$ {{ product().oldPrice!.toFixed(2).replace('.', ',') }}
        </p>
      }
      <p class="text-2xl font-bold text-emerald-600">
        R$ {{ product().price.toFixed(2).replace('.', ',') }}
      </p>
    </div>

    <div class="flex gap-2">
      <a
        [routerLink]="['/produto', product().id]"
        class="flex-1 text-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2"
      >
        Detalhes
      </a>
      <a
        [href]="product().affiliateLink"
        target="_blank"
        rel="noopener noreferrer nofollow"
        class="flex-1 text-center px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2"
      >
        Ver Oferta
      </a>
    </div>
  </div>
</div>
